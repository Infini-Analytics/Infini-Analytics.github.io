# Infini Analytics 0.4.0 Release Notes
## 概述
Infini Analysis 0.4.0于2019年10月15日发布，相较0.3.0版本，重要改进如下：
- 优化亿级数据的展示性能
- 优化系统安装配置工具
- 新增可视化交互界面，支持9类核心图表，在界面布局、图表、分析算法等三个层面支持高度自定义。
- 新增对GIS核心分析算法的GPU加速，当前的加速能力覆盖数据过滤、时空变换、数据聚合与数据关联。
- 新增服务器端GPU加速渲染能力，与SQL执行引擎无缝整合，实现从数据分析到图像渲染的端到端加速。
- 新增GPU加速的CSV解析。
- 内存层数据格式提供对Apache Arrow的兼容，支持基于Apache Plasma的In-memory数据交换。
- 新增docker化部署方式。

## Infini
### 系统配置：

- 支持前端界面修改数据库信息配置。
- 支持通过环境变量设置api地址。
### 仪表盘：

- 支持实时修改仪表盘标题。
- 新增堆垛图，支持垂直和水平展示数据。
- 新增交叉热点图，支持多分组、多行，多列数据过滤，提供更多的数据组合。
- 新增图表数据导出csv功能。
- 新增地图颜色显示提示。
- 优化维度和计量数值自动格式化功能，增加3种数值显示格式。
- 表格支持显示分组，并支持交叉过滤。
- 新增自动数据分组，防止数据过多导致页面卡死。
### 图表编辑器：

- 新增数据表预览列定义功能
- 新增修改编辑模式清除过滤器


## MegaWise
### SQL执行引擎：
- 新增GIS函数，包括
  1. distance_in_meters ： 根据经纬度计算两点间的球面距离；
  2. gis_discrete_trans_scale ： 线性变换函数； 
  3. gis_discrete_trans_scale_long_epsg_4326_900913 : 经度变换函数，EPSG:4326坐标转EPSG:900913坐标；
  4. gis_discrete_trans_scale_lat_epsg_4326_900913 : 纬度变换函数，EPSG:4326坐标转 EPSG:900913坐标；
  5. is_in_circle : 判断坐标上的点是否在指定的圆内；
  6. is_in_polygon : 判断坐标上的点是否在指定的多边形内。
- 新增对quarter级别的date_trunc支持。
- 优化多GPU卡任务调度，提升调度器对数据局部性的感知能力。
- 优化元数据访问效率。
- 优化AGG算子性能。
- SQL优化器：
- 优化对AGG的算法配置。
- 优化选择AGG的物理实现方式。
- 优化选择JOIN的物理实现方式。
- 优化distinct相关的AGG操作，提升执行性能。
- 支持AGG的嵌套子查询。
- 优化ANY子查询，提升执行性能。
- 优化extract函数的结果范围估计。
- 优化LIMIT，支持高性能的物理实现。
- 新增面向主存/显存数据交换开销的优化规则。

## Picasso
- 新增数据渲染类型，包括
  1. circles_2d：二维散点图；
  2. weighted_color_circles_2d：大小、颜色可变的带权二维散点图；
  3. multi_color_circles_2d：分组着色的二维散点图；
  4. heatmap_2d：二维热力图；
  5. icon_2d：渲染二维图标。
- 支持EGL离屏渲染。
- 优化render过程，使用GLSL语言加速渲染。
- 并行化染数据的准备过程。
- 加速图片编码与压缩过程。

## BUG修复

- 1000296            解决了部分sql不出图的问题
- 1000291            解决了distinctJoin生成错误的planTree的问题
- 1000229            解决了出图函数偶发rc=282633的错误 
- 1000223            解决了系统长时间运行，grpc消息丢失的问题
- 1000209            解决了系统运行多次后的异常问题
- 1000199            解决了部分sql无数据返回的问题
- 1000197            解决了piechart的结果异常问题
- 1000194            移除了对glfw的渲染依赖
- 1000192            解决了gis 查询无响应的问题
- 1000185            解决了gis部分sql运行错误问题
- 1000184            解决了部分sql运行错误问题
- 1000183            解决了系统运行时render_engine的崩溃问题
- 1000182            解决了megawise 导入数据错误的问题
- 1000181            解决了grpc通信的稳定性问题
- 1000161            解决了megawise崩溃后数据未落盘的问题
- 1000138            解决了chewie当中部分数据未删除导致的内存泄漏的问题
- 1000133            解决了饼状图选取逻辑错误的问题
- 1000132            解决了gis 多边形选取查询结果异常的问题
- 1000125            解决了gis render_engine运行稳定性的问题
- 1000070            解决了gpu多线程运行时，线程间global memory数据一致性的问题
- 1000068            解决了在设置SetChunkMeta模板接口时，数据类型使用错误的问题
- 1000059            解决了多处显存泄漏的问题
- 1000052            解决了limit节点在传输数据为空时，未输出0行数据的meta的问题
- 1000044            解决了打开文件数量超过linux默认大小导致程序崩溃的问题
- 1000040            解决了数值过大时显示的问题
- 1000036            解决了在有热数据的情况下，插入文件导致系统崩溃的问题（接入kudu后自动修复）
- 1000035            解决了同时打开文件过多导致megawise崩溃的问题
- 1000027            解决了chewie内部error code不一致的问题
- 1000011            解决了数据库对timestamp数据的处理，丰富了数据库的类型数量
- 1000320            修复了表格不能添加两列的问题
- 1000319            修复了点图弹出窗口重复显示数值问题
- 1000318            修复了线图动画显示偶尔卡住问题
- 1000317            优化了饼图重复刷新问题
- 1000316            优化了线图重复刷新问题
